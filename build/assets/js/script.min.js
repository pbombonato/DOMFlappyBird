"use strict";function novoElemento(e,t){e=document.createElement(e);return e.className=t,e}function Barreira(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=(this.elemento=novoElemento("div","barreira"),novoElemento("div","borda")),n=novoElemento("div","corpo");this.elemento.appendChild(e?n:t),this.elemento.appendChild(e?t:n),this.setAltura=function(e){return n.style.height=e+"px"}}function ParDeBarreiras(n,r,e){var o=this;this.elemento=novoElemento("div","par-de-barreiras"),this.superior=new Barreira(!0),this.inferior=new Barreira(!1),this.elemento.appendChild(this.superior.elemento),this.elemento.appendChild(this.inferior.elemento),this.sortearAbertura=function(){var e=Math.random()*(n-r),t=n-r-e;o.superior.setAltura(e),o.inferior.setAltura(t)},this.getX=function(){return parseInt(o.elemento.style.left.split("px")[0])},this.setX=function(e){return o.elemento.style.left=e+"px"},this.getLargura=function(){return o.elemento.clientWidth},this.sortearAbertura(),this.setX(e)}function Barreiras(e,r,t,o,i){var a=this;this.pares=[new ParDeBarreiras(e,t,r+o),new ParDeBarreiras(e,t,r+2*o),new ParDeBarreiras(e,t,r+3*o),new ParDeBarreiras(e,t,r+4*o)],this.animar=function(n){a.pares.forEach(function(e){e.setX(e.getX()-n),e.getX()<-e.getLargura()&&(e.setX(e.getX()+o*a.pares.length),e.sortearAbertura());var t=r/2;e.getX()+n>=t&&e.getX()<t&&i()})}}function Passaro(n){var r=this,o=!1;this.elemento=novoElemento("img","passaro"),this.elemento.src="assets/imgs/passaro.png",this.getY=function(){return parseInt(r.elemento.style.bottom.split("px")[0])},this.setY=function(e){return r.elemento.style.bottom=e+"px"},window.onkeydown=function(e){return o=!0},window.onkeyup=function(e){return o=!1},this.animar=function(e,t){e=r.getY()+(o?e:-t),t=n-r.elemento.clientHeight;e<=0?r.setY(0):t<=e?r.setY(t):r.setY(e)},this.setY(n/2)}function Progresso(){var t=this,n=(this.elemento=novoElemento("span","progresso"),document.querySelector("[ending] > .pontuacao"));this.atualizarPontos=function(e){t.elemento.innerHTML=e,n.innerHTML=e},this.atualizarPontos(0)}function estaoSobrepostos(e,t){var e=e.getBoundingClientRect(),t=t.getBoundingClientRect(),n=e.left+e.width>=t.left&&t.left+t.width>=e.left,t=e.top+e.height>=t.top&&t.top+t.height>=e.top;return n&&t}function colidiu(n,e){var r=!1;return e.pares.forEach(function(e){var t;r||(t=e.superior.elemento,e=e.inferior.elemento,r=estaoSobrepostos(n.elemento,t)||estaoSobrepostos(n.elemento,e)||n.getY()<=0)}),r}function FlappyBird(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:250,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:600,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:7,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:5,i=0,a=document.querySelector("[wm-flappy]"),s=a.clientHeight,l=a.clientWidth,u=new Progresso,h=new Barreiras(s,l,e,t,function(){return u.atualizarPontos(++i)}),c=new Passaro(s);a.appendChild(u.elemento),a.appendChild(c.elemento),h.pares.forEach(function(e){return a.appendChild(e.elemento)}),this.start=function(){document.querySelector("[intro]").remove();var e=setInterval(function(){h.animar(n),c.animar(r,o),colidiu(c,h)&&(clearInterval(e),document.querySelector("[ending]").style.display="flex",window.onkeydown=function(e){return document.location.reload(!0)})},10)}}window.onkeydown=function(e){window.onkeydown="",(new FlappyBird).start()};